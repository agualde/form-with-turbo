<div class="container mt-5">
  <%= form_tag users_path, method: :get, class: 'mb-3' do %>
    <div class="row g-3 align-items-end">
      <div class="col-auto">
        <%= label_tag :city, "Filter by City:", class: 'form-label' %>
        <%= select_tag :city, options_for_select(@cities, params[:city]), 
                      prompt: "All Cities", class: 'form-select' %>
      </div>
      <div class="col-auto">
        <%= submit_tag "Filter", class: 'btn btn-primary' %>
      </div>
    </div>
  <% end %>

  <div data-controller="ajax-submit-user">
    <table class="table table-striped table-hover">
      <thead class="table-dark">
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>City</th>
          <th>Telephone</th>
        </tr>
      </thead>
      <tbody data-ajax-submit-user-target="table">
        <% @users.each do |user| %>
          <%= render partial: "user_row", locals: { user: user } %>
        <% end %>
      </tbody>
    </table>

    <h3 class="mt-5 mb-3">Add New User</h3>
    <%= render partial: 'form', locals: { user: @user } %>
  </div>
</div>