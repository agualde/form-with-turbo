<div class="container mt-5" data-controller="ajax-submit-user">
  <div data-controller="filter-users">
    <div class="row g-3 align-items-end mb-3">
      <div class="col-auto">
        <%= label_tag :city, "Filter by City:", class: 'form-label' %>
        <%= select_tag :city, 
                       options_for_select(@cities, params[:city]), 
                       prompt: "All Cities", 
                       class: 'form-select',
                       data: { 
                         filter_users_target: "select",
                         action: "change->filter-users#filter"
                       } %>
      </div>
    </div>

    <table class="table table-striped table-hover">
      <thead class="table-dark">
        <tr>
          <th>Name</th>
          <th>Email</th>
          <th>City</th>
          <th>Telephone</th>
        </tr>
      </thead>
      <tbody data-ajax-submit-user-target="table" data-filter-users-target="table">
        <%= render partial: "user_table", locals: { users: @users } %>
      </tbody>
    </table>
  </div>

  <div >
    <h3 class="mt-5 mb-3">Add New User</h3>
    <%= render partial: 'form', locals: { user: @user } %>
  </div>
</div>